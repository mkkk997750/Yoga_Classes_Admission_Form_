{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MUKESH KUMAR SHAH\\\\Downloads\\\\assignment_flexmoney\\\\client\\\\src\\\\components\\\\Payment.js\";\n// components/Payment.js: This is the React component for the payment form\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport './Payment.css';\nconst Payment = () => {\n  // Define the state variables for the user input and validation\n  const [method, setMethod] = useState('');\n  const [amount, setAmount] = useState(500);\n  const [errors, setErrors] = useState({});\n\n  // Define the state variable for the API response\n  const [response, setResponse] = useState(null);\n\n  // Get the history object from React Router\n  const history = useHistory();\n\n  // Define a function to handle the form submission\n  const handleSubmit = e => {\n    // Prevent the default browser behavior\n    e.preventDefault();\n\n    // Clear any previous errors\n    setErrors({});\n\n    // Validate the user input\n    let isValid = true;\n    if (!method) {\n      setErrors(prev => ({\n        ...prev,\n        method: 'Please select a payment method'\n      }));\n      isValid = false;\n    }\n    if (!amount) {\n      setErrors(prev => ({\n        ...prev,\n        amount: 'Please enter the payment amount'\n      }));\n      isValid = false;\n    } else if (amount !== 500) {\n      setErrors(prev => ({\n        ...prev,\n        amount: 'Invalid payment amount'\n      }));\n      isValid = false;\n    }\n\n    // If the input is valid, make the API request\n    if (isValid) {\n      // Get the user's token from the local storage\n      const token = localStorage.getItem('token');\n      axios.post('/api/pay', {\n        token,\n        method,\n        amount\n      }).then(res => {\n        // Set the response state\n        setResponse(res.data);\n      }).catch(err => {\n        // Set the error state\n        setErrors(err.response.data);\n      });\n    }\n  };\n\n  // Use the useEffect hook to handle the API response\n  useEffect(() => {\n    // If the response is successful, redirect to the home page\n    if (response) {\n      history.push('/');\n    }\n  }, [response, history]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, \"Payment\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"method\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, \"Payment Method\"), /*#__PURE__*/React.createElement(\"select\", {\n    id: \"method\",\n    value: method,\n    onChange: e => setMethod(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, \"Select a payment method\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, \"Card\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"paypal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, \"Paypal\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"upi\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, \"UPI\")), errors.method && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 29\n    }\n  }, errors.method)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"amount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, \"Payment Amount\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    id: \"amount\",\n    value: amount,\n    onChange: e => setAmount(e.target.value),\n    readOnly: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }), errors.amount && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 29\n    }\n  }, errors.amount)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, \"Pay\"))));\n};\nexport default Payment;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","Payment","method","setMethod","amount","setAmount","errors","setErrors","response","setResponse","history","useHistory","handleSubmit","e","preventDefault","isValid","prev","token","localStorage","getItem","post","then","res","data","catch","err","push","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","id","value","onChange","target","type","readOnly"],"sources":["C:/Users/MUKESH KUMAR SHAH/Downloads/assignment_flexmoney/client/src/components/Payment.js"],"sourcesContent":["// components/Payment.js: This is the React component for the payment form\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './Payment.css';\r\n\r\nconst Payment = () => {\r\n  // Define the state variables for the user input and validation\r\n  const [method, setMethod] = useState('');\r\n  const [amount, setAmount] = useState(500);\r\n  const [errors, setErrors] = useState({});\r\n\r\n  // Define the state variable for the API response\r\n  const [response, setResponse] = useState(null);\r\n\r\n  // Get the history object from React Router\r\n  const history = useHistory();\r\n\r\n  // Define a function to handle the form submission\r\n  const handleSubmit = (e) => {\r\n    // Prevent the default browser behavior\r\n    e.preventDefault();\r\n\r\n    // Clear any previous errors\r\n    setErrors({});\r\n\r\n    // Validate the user input\r\n    let isValid = true;\r\n    if (!method) {\r\n      setErrors((prev) => ({ ...prev, method: 'Please select a payment method' }));\r\n      isValid = false;\r\n    }\r\n    if (!amount) {\r\n      setErrors((prev) => ({ ...prev, amount: 'Please enter the payment amount' }));\r\n      isValid = false;\r\n    } else if (amount !== 500) {\r\n      setErrors((prev) => ({ ...prev, amount: 'Invalid payment amount' }));\r\n      isValid = false;\r\n    }\r\n\r\n    // If the input is valid, make the API request\r\n    if (isValid) {\r\n      // Get the user's token from the local storage\r\n      const token = localStorage.getItem('token');\r\n\r\n      axios\r\n        .post('/api/pay', { token, method, amount })\r\n        .then((res) => {\r\n          // Set the response state\r\n          setResponse(res.data);\r\n        })\r\n        .catch((err) => {\r\n          // Set the error state\r\n          setErrors(err.response.data);\r\n        });\r\n    }\r\n  };\r\n\r\n  // Use the useEffect hook to handle the API response\r\n  useEffect(() => {\r\n    // If the response is successful, redirect to the home page\r\n    if (response) {\r\n      history.push('/');\r\n    }\r\n  }, [response, history]);\r\n\r\n  return (\r\n    <div className=\"payment\">\r\n      <h2>Payment</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"method\">Payment Method</label>\r\n          <select\r\n            id=\"method\"\r\n            value={method}\r\n            onChange={(e) => setMethod(e.target.value)}\r\n          >\r\n            <option value=\"\">Select a payment method</option>\r\n            <option value=\"card\">Card</option>\r\n            <option value=\"paypal\">Paypal</option>\r\n            <option value=\"upi\">UPI</option>\r\n          </select>\r\n          {errors.method && <span className=\"error\">{errors.method}</span>}\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"amount\">Payment Amount</label>\r\n          <input\r\n            type=\"number\"\r\n            id=\"amount\"\r\n            value={amount}\r\n            onChange={(e) => setAmount(e.target.value)}\r\n            readOnly\r\n          />\r\n          {errors.amount && <span className=\"error\">{errors.amount}</span>}\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <button type=\"submit\">Pay</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Payment;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}